<section class="py-24 bg-[var(--background)] border-t border-[var(--border)]">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6">
            <div class="max-w-xl">
                <span class="text-accent text-xs font-bold uppercase tracking-widest mb-3 block">Developer Tooling</span>
                <h2 class="text-4xl font-extrabold mb-4 text-[var(--text-main)]">No-Code API Builder</h2>
                <p class="text-[var(--text-muted)]">Rapidly prototype and test queries with our visual request generator. Copy the code into your environment when ready.</p>
            </div>
            <div class="flex gap-2">
                <button class="px-4 py-2 text-xs font-bold bg-[var(--background)] border border-[var(--border)] rounded text-[var(--text-main)] hover:bg-[var(--surface)] transition-colors flex items-center gap-2 shadow-sm">
                    <span class="material-symbols-outlined text-sm">history</span> History
                </button>
                <button class="px-4 py-2 text-xs font-bold bg-[var(--background)] border border-[var(--border)] rounded text-[var(--text-main)] hover:bg-[var(--surface)] transition-colors flex items-center gap-2 shadow-sm">
                    <span class="material-symbols-outlined text-sm">save</span> Presets
                </button>
            </div>
        </div>
        <div class="grid lg:grid-cols-12 gap-8 items-stretch">
            <div class="lg:col-span-4">
                <div class="bg-[var(--surface)] p-8 rounded-xl border border-[var(--border)] h-full flex flex-col">
                    <div class="space-y-6 flex-grow">
                        <div>
                            <label class="block text-[11px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-2">Instrument Symbol</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-slate-400">
                                    <span class="material-symbols-outlined text-sm">search</span>
                                </span>
                                <input class="block w-full pl-9 border-[var(--border)] bg-[var(--background)] text-[var(--text-main)] rounded-lg text-sm focus:ring-accent focus:border-accent py-2.5" placeholder="Search Ticker..." type="text" value="AAPL"/>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-[11px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-2">Start Date</label>
                                <input class="w-full border-[var(--border)] bg-[var(--background)] text-[var(--text-main)] rounded-lg text-xs focus:ring-accent focus:border-accent py-2.5" type="date" value="2024-01-01"/>
                            </div>
                            <div>
                                <label class="block text-[11px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-2">End Date</label>
                                <input class="w-full border-[var(--border)] bg-[var(--background)] text-[var(--text-main)] rounded-lg text-xs focus:ring-accent focus:border-accent py-2.5" type="date" value="2024-05-20"/>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-[11px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-2">Interval</label>
                                <select class="w-full border-[var(--border)] bg-[var(--background)] text-[var(--text-main)] rounded-lg text-xs focus:ring-accent focus:border-accent py-2.5">
                                    <option>Tick</option>
                                    <option>1 Min</option>
                                    <option selected="">5 Min</option>
                                    <option>Daily</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-[11px] font-bold text-[var(--text-muted)] uppercase tracking-wider mb-2">Format</label>
                                <select class="w-full border-[var(--border)] bg-[var(--background)] text-[var(--text-main)] rounded-lg text-xs focus:ring-accent focus:border-accent py-2.5">
                                    <option>JSON</option>
                                    <option>CSV</option>
                                    <option>Parquet</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button class="w-full mt-8 py-3.5 bg-primary text-white font-bold rounded-lg flex items-center justify-center gap-2 text-sm shadow-xl shadow-indigo-900/10 hover:bg-slate-900 transition-all">
                        <span class="material-symbols-outlined text-lg">bolt</span> Run Query
                    </button>
                </div>
            </div>
            <div class="lg:col-span-8">
                <div class="bg-slate-950 rounded-xl border border-slate-800 overflow-hidden h-full flex flex-col shadow-lg">
                    <div class="flex items-center px-4 py-2 border-b border-slate-800 bg-slate-900/50">
                        <div class="flex gap-1 mr-6" id="code-tabs">
                            <button data-lang="curl" class="tab-btn px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest text-white border-b-2 border-accent transition-all">cURL</button>
                            <button data-lang="nodejs" class="tab-btn px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest text-slate-500 hover:text-slate-300 border-b-2 border-transparent transition-all">Node.js</button>
                            <button data-lang="python" class="tab-btn px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest text-slate-500 hover:text-slate-300 border-b-2 border-transparent transition-all">Python</button>
                        </div>
                        <div class="ml-auto flex items-center gap-3">
                            <span class="text-[10px] font-mono text-emerald-500">200 OK â€” 142ms</span>
                            <button id="copy-code" class="p-1.5 text-slate-500 hover:text-white transition-colors">
                                <span class="material-symbols-outlined text-[18px]">content_copy</span>
                            </button>
                        </div>
                    </div>
                    <div class="p-8 font-mono text-xs overflow-auto flex-grow bg-slate-950">
                        <!-- cURL Snippet -->
                        <div id="curl-snippet" class="code-snippet text-slate-400">
                            <span class="text-blue-400">curl</span> --request GET \<br/>
                            &nbsp;&nbsp;--url <span class="text-orange-300">'https://api.quantdata.io/v2/market/bars'</span> \<br/>
                            &nbsp;&nbsp;--header <span class="text-orange-300">'Authorization: Bearer YOUR_API_KEY'</span> \<br/>
                            &nbsp;&nbsp;--data-urlencode <span class="text-orange-300">'symbol=AAPL'</span> \<br/>
                            &nbsp;&nbsp;--data-urlencode <span class="text-orange-300">'start=2024-01-01'</span> \<br/>
                            &nbsp;&nbsp;--data-urlencode <span class="text-orange-300">'end=2024-05-20'</span> \<br/>
                            &nbsp;&nbsp;--data-urlencode <span class="text-orange-300">'interval=5min'</span>
                        </div>
                        
                        <!-- Node.js Snippet -->
                        <div id="nodejs-snippet" class="code-snippet text-slate-400 hidden">
                            <span class="text-blue-400">const</span> axios = <span class="text-emerald-400">require</span>(<span class="text-orange-300">'axios'</span>);<br/><br/>
                            <span class="text-blue-400">const</span> options = {<br/>
                            &nbsp;&nbsp;method: <span class="text-orange-300">'GET'</span>,<br/>
                            &nbsp;&nbsp;url: <span class="text-orange-300">'https://api.quantdata.io/v2/market/bars'</span>,<br/>
                            &nbsp;&nbsp;params: { <span class="text-slate-300">symbol</span>: <span class="text-orange-300">'AAPL'</span>, <span class="text-slate-300">interval</span>: <span class="text-orange-300">'5min'</span> },<br/>
                            &nbsp;&nbsp;headers: { <span class="text-slate-300">Authorization</span>: <span class="text-orange-300">'Bearer YOUR_API_KEY'</span> }<br/>
                            };<br/><br/>
                            <span class="text-emerald-400">axios</span>.<span class="text-blue-400">request</span>(options).<span class="text-blue-400">then</span>(<span class="text-blue-400">function</span> (response) {<br/>
                            &nbsp;&nbsp;<span class="text-slate-300">console</span>.<span class="text-blue-400">log</span>(response.data);<br/>
                            });
                        </div>

                        <!-- Python Snippet -->
                        <div id="python-snippet" class="code-snippet text-slate-400 hidden">
                            <span class="text-blue-400">import</span> requests<br/><br/>
                            <span class="text-slate-300">url</span> = <span class="text-orange-300">"https://api.quantdata.io/v2/market/bars"</span><br/>
                            <span class="text-slate-300">params</span> = {<br/>
                            &nbsp;&nbsp;<span class="text-orange-300">"symbol"</span>: <span class="text-orange-300">"AAPL"</span>,<br/>
                            &nbsp;&nbsp;<span class="text-orange-300">"start"</span>: <span class="text-orange-300">"2024-01-01"</span>,<br/>
                            &nbsp;&nbsp;<span class="text-orange-300">"interval"</span>: <span class="text-orange-300">"5min"</span><br/>
                            }<br/>
                            <span class="text-slate-300">headers</span> = {<span class="text-orange-300">"Authorization"</span>: <span class="text-orange-300">"Bearer YOUR_API_KEY"</span>}<br/><br/>
                            <span class="text-slate-300">response</span> = requests.<span class="text-emerald-400">get</span>(url, params=params, headers=headers)<br/>
                            <span class="text-blue-400">print</span>(response.<span class="text-emerald-400">json</span>())
                        </div>

                        <div class="mt-8 border-t border-slate-800 pt-6">
                            <div class="text-slate-500 mb-4 uppercase text-[10px] font-bold tracking-[0.2em] flex items-center gap-2">
                                <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                                Live API Response
                            </div>
                            <div class="text-slate-300">
                                {<br/>
                                &nbsp;&nbsp;<span class="text-emerald-400">"status"</span>: <span class="text-orange-300">"success"</span>,<br/>
                                &nbsp;&nbsp;<span class="text-emerald-400">"data"</span>: [<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="text-emerald-400">"t"</span>: <span class="text-blue-400">1704114000</span>, <span class="text-emerald-400">"o"</span>: <span class="text-blue-400">192.53</span>, <span class="text-emerald-400">"h"</span>: <span class="text-blue-400">193.10</span>, <span class="text-emerald-400">"l"</span>: <span class="text-blue-400">192.40</span>, <span class="text-emerald-400">"c"</span>: <span class="text-blue-400">192.88</span> },<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;{ <span class="text-emerald-400">"t"</span>: <span class="text-blue-400">1704114300</span>, <span class="text-emerald-400">"o"</span>: <span class="text-blue-400">192.89</span>, <span class="text-emerald-400">"h"</span>: <span class="text-blue-400">192.95</span>, <span class="text-emerald-400">"l"</span>: <span class="text-blue-400">192.15</span>, <span class="text-emerald-400">"c"</span>: <span class="text-blue-400">192.42</span> }<br/>
                                &nbsp;&nbsp;]<br/>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-8 grid lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8 bg-[var(--background)] border border-[var(--border)] rounded-xl overflow-hidden flex flex-col shadow-sm">
                <div class="px-6 py-4 border-b border-[var(--border)] flex items-center justify-between bg-[var(--surface)]">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-accent">show_chart</span>
                        <h4 class="text-sm font-bold uppercase tracking-wider text-[var(--text-main)]">Data Visualization</h4>
                    </div>
                    <div class="flex items-center gap-4 text-[10px] font-bold uppercase">
                        <div class="flex items-center gap-1.5 text-emerald-600">
                            <span class="w-2.5 h-2.5 bg-emerald-500 rounded-sm"></span> Bullish
                        </div>
                        <div class="flex items-center gap-1.5 text-rose-600">
                            <span class="w-2.5 h-2.5 bg-rose-500 rounded-sm"></span> Bearish
                        </div>
                    </div>
                </div>
                <div class="flex-grow min-h-[400px] relative p-8 flex items-end gap-2 overflow-hidden bg-[var(--background)]">
                    <div class="absolute inset-0 grid-bg-light opacity-50 pointer-events-none"></div>
                    {% for i in range(7) %}
                        <div class="flex-1 flex flex-col items-center justify-end h-full z-10">
                            {% if i % 2 == 0 %}
                                <div class="w-[1px] h-32 bg-[var(--border)]"></div>
                                <div class="w-4 h-16 bg-rose-500 rounded-sm shadow-sm"></div>
                                <div class="w-[1px] h-12 bg-[var(--border)]"></div>
                            {% else %}
                                <div class="w-[1px] h-24 bg-[var(--border)]"></div>
                                <div class="w-4 h-20 bg-emerald-500 rounded-sm shadow-sm"></div>
                                <div class="w-[1px] h-16 bg-[var(--border)]"></div>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <div class="absolute left-0 top-0 bottom-0 w-12 border-r border-[var(--border)] flex flex-col justify-between py-8 px-2 text-[9px] font-mono text-slate-400 bg-[var(--background)]/80 backdrop-blur-sm">
                        <span>198.50</span>
                        <span>196.25</span>
                        <span>194.00</span>
                        <span>191.75</span>
                        <span>189.50</span>
                    </div>
                    <div class="absolute bottom-0 left-12 right-0 h-6 border-t border-[var(--border)] flex justify-between px-8 items-center text-[9px] font-mono text-slate-400 bg-[var(--background)]/80 backdrop-blur-sm">
                        <span>09:30</span>
                        <span>11:00</span>
                        <span>13:00</span>
                        <span>14:30</span>
                        <span>16:00</span>
                    </div>
                </div>
            </div>
            
            <div class="lg:col-span-4 bg-[var(--surface)] border border-[var(--border)] rounded-xl p-8 flex flex-col shadow-sm">
                <div class="mb-8">
                    <h4 class="text-sm font-bold uppercase tracking-widest mb-2 flex items-center gap-2 text-[var(--text-main)]">
                        <span class="material-symbols-outlined text-accent text-xl">download</span> Export Dataset
                    </h4>
                    <p class="text-xs text-[var(--text-muted)] leading-relaxed">Download your custom query results in high-performance formats ready for production environments.</p>
                </div>
                <div class="space-y-3 mb-10">
                    {% set formats = [
                        {'name': 'CSV', 'title': 'Raw Tabular Data', 'size': '4.2 MB', 'active': true},
                        {'name': 'JSON', 'title': 'Document Object', 'size': '12.8 MB', 'active': false},
                        {'name': 'PRQ', 'title': 'Apache Parquet', 'size': '1.1 MB (Opt.)', 'active': false}
                    ] %}
                    {% for format in formats %}
                        <div class="p-4 rounded-lg border-2 {% if format.active %}border-accent{% else %}border-[var(--border)]{% endif %} bg-[var(--background)] shadow-sm cursor-pointer group">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 {% if format.active %}bg-indigo-50 dark:bg-indigo-900/30 text-accent{% else %}bg-[var(--surface)] text-slate-400{% endif %} rounded flex items-center justify-center group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/30 group-hover:text-accent transition-colors">
                                        <span class="text-[10px] font-bold">{{ format.name }}</span>
                                    </div>
                                    <div>
                                        <div class="text-xs font-bold text-[var(--text-main)]">{{ format.title }}</div>
                                        <div class="text-[10px] text-[var(--text-muted)]">{{ format.size }}</div>
                                    </div>
                                </div>
                                <span class="material-symbols-outlined {% if format.active %}text-accent{% else %}text-slate-200 group-hover:text-accent{% endif %} transition-colors">
                                    {% if format.active %}check_circle{% else %}circle{% endif %}
                                </span>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <button class="w-full py-4 bg-primary text-white font-bold rounded-lg flex items-center justify-center gap-2 text-sm transition-all mt-auto hover:bg-slate-900 shadow-lg shadow-indigo-900/10">
                    Download Package <span class="material-symbols-outlined">download</span>
                </button>
            </div>
        </div>
    </div>
</section>

<script>
    (function() {
        const tabBtns = document.querySelectorAll('.tab-btn');
        const snippets = document.querySelectorAll('.code-snippet');
        const copyBtn = document.getElementById('copy-code');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const lang = btn.getAttribute('data-lang');
                
                // Update buttons
                tabBtns.forEach(b => {
                    b.classList.remove('text-white', 'border-accent');
                    b.classList.add('text-slate-500', 'hover:text-slate-300', 'border-transparent');
                });
                btn.classList.add('text-white', 'border-accent');
                btn.classList.remove('text-slate-500', 'hover:text-slate-300', 'border-transparent');

                // Update snippets
                snippets.forEach(s => s.classList.add('hidden'));
                document.getElementById(`${lang}-snippet`).classList.remove('hidden');
            });
        });

        if (copyBtn) {
            copyBtn.addEventListener('click', () => {
                const activeSnippet = document.querySelector('.code-snippet:not(.hidden)');
                const text = activeSnippet.innerText.replace(/\u00A0/g, ' '); // Clean NBSP
                
                navigator.clipboard.writeText(text).then(() => {
                    const icon = copyBtn.querySelector('.material-symbols-outlined');
                    const originalIcon = icon.innerText;
                    icon.innerText = 'check';
                    setTimeout(() => {
                        icon.innerText = originalIcon;
                    }, 2000);
                });
            });
        }
    })();
</script>
